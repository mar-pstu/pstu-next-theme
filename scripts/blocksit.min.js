!function(n){var r,i,o={numOfCol:5,offsetX:5,offsetY:5,blockElement:"div"},u=[];Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1});var f=function(t,e,n,r,a){for(var i=0;i<r;i++){var f=new Object;f.x=e+i,f.size=r,f.endY=n+a+2*o.offsetY,u.push(f)}},s=function(t,e){for(var n=0;n<u.length;n++){var r=u[n];if("x"==e&&r.x==t)return n;if("endY"==e&&r.endY==t)return n}},h=function(t,e){for(var n=[],r=0;r<e;r++)n.push(u[s(t+r,"x")].endY);var a=Math.min.apply(Math,n);return[a,Math.max.apply(Math,n),n.indexOf(a)]},a=function(t,e){!t.data("size")||t.data("size")<0?t.data("size",1):t.data("size")>o.numOfCol&&t.data("size",o.numOfCol);var n=function(t){if(1<t){for(var e,n,r=u.length-t,a=!1,i=0;i<u.length;i++){var f=u[i].x;if(0<=f&&f<=r){var o=h(f,t);a?o[1]<e[1]&&(e=o,n=f):(a=!0,e=o,n=f)}}return[n,e[1]]}return[(e=h(0,u.length))[2],e[0]]}(t.data("size")),r=i*t.data("size")-(t.outerWidth()-t.width());t.css({width:r-2*o.offsetX,left:n[0]*i,top:n[1],position:"absolute"});var a=t.outerHeight();!function(t,e){for(var n=0;n<e;n++){var r=s(t+n,"x");u.splice(r,1)}}(n[0],t.data("size")),f(t.attr("id"),n[0],n[1],t.data("size"),a)};n.fn.BlocksIt=function(t){t&&"object"==typeof t&&n.extend(o,t),r=n(this),i=r.width()/o.numOfCol,function(){u=[];for(var t=0;t<o.numOfCol;t++)f("empty-"+t,t,0,1,-o.offsetY)}(),r.children(o.blockElement).each(function(t){a(n(this))});var e=h(0,u.length);return r.height(e[1]+o.offsetY),this}}(jQuery);